<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login - Vibe Tribe</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background:url("bg.jpg") no-repeat center/cover;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.container {
  background:rgba(255,255,255,0.2);
  backdrop-filter:blur(12px);
  padding:25px;
  width:320px;
  border-radius:16px;
  color:#fff;
  display:none;
}

input {
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:none;
}

button {
  width:100%;
  padding:10px;
  border:none;
  border-radius:6px;
  margin-top:10px;
  cursor:pointer;
  background:#2ecc71;
  color:#fff;
  font-weight:bold;
}
</style>
</head>
<body>

<div class="container" id="loginBox">
  <h2>Login</h2>

  <label>Phone Number</label>
  <input id="phone" placeholder="+91XXXXXXXXXX">

  <div id="recaptcha"></div>

  <button onclick="sendOTP()">Send OTP</button>

  <div id="otpBox" style="display:none;">
      <input id="otpCode" placeholder="Enter OTP">
      <button onclick="verifyOTP()">Verify OTP</button>
  </div>

</div>

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyCpr9MXotr-M7noA7G28irleItKUELCY8Q",
  authDomain: "vibe-tribe-d5138.firebaseapp.com",
  projectId: "vibe-tribe-d5138",
  storageBucket: "vibe-tribe-d5138.firebasestorage.app",
  messagingSenderId: "656217231234",
  appId: "1:656217231234:web:e19e5e41836c4893c9899b",
  measurementId: "G-BMJ9XQD4WD"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

auth.onAuthStateChanged((user)=>{
  if(user){
    window.location = "index.html";
  } else {
    document.getElementById("loginBox").style.display = "block";
  }
});

function sendOTP() {
  let number = document.getElementById("phone").value;
  window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha');

  auth.signInWithPhoneNumber(number, window.recaptchaVerifier)
  .then((confirmationResult)=>{
      window.confirmationResult = confirmationResult;
      alert("OTP Sent!");
      document.getElementById("otpBox").style.display = "block";
  }).catch((error)=>{
      alert(error.message);
  });
}

function verifyOTP() {
  let code = document.getElementById("otpCode").value;

  window.confirmationResult.confirm(code)
  .then(()=>{
    alert("Logged In!");
    window.location = "index.html";
  }).catch((err)=>{
    alert(err.message);
  });
}
</script>

</body>
</html>
