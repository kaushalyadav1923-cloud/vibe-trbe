<input type="file" id="videoFile" accept="video/*">
<button onclick="uploadVideo()">Upload Video</button>

<script>
    const storage = firebase.storage();

    function uploadVideo() {
        let file = document.getElementById("videoFile").files[0];
        if (!file) {
            alert("Select a video first!");
            return;
        }

        let user = firebase.auth().currentUser;
        if (!user) {
            alert("Login first!");
            return;
        }

        // storage path
        let videoRef = storage.ref("videos/" + user.uid + "/" + Date.now() + "_" + file.name);

        let uploadTask = videoRef.put(file);

        uploadTask.on("state_changed",
            (snapshot) => {
                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                console.log("Upload: " + progress.toFixed(0) + "%");
            },
            (error) => {
                console.error(error);
                alert("Upload error: " + error.message);
            },
            () => {
                uploadTask.snapshot.ref.getDownloadURL().then((url) => {
                    console.log("Video URL:", url);
                    alert("Upload Complete!");
                });
            }
        );
    }
</script>
